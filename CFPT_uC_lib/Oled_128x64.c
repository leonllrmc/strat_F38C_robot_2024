/*===========================================================================*=
   CFPT - Projet : Oled_128x64.c
   Auteur        : CFPTELEC
   Date creation : 27.01.2021
  =============================================================================
   Descriptif: Fonctions pour communiquer avec un afficheur OLED 128X64.
   
   Datasheet: https://cdn-shop.adafruit.com/datasheets/SSD1306.pdf
   
   Les fonctions pour le capteur (voir descriptif dans les entetes des fonctions)
      void OLEDSendMessageINT(char jsonName[], int dataToSend, unsigned char lin, unsigned char col);
      void OLEDSendMessage(char strToSend[],unsigned char lin, unsigned char col);
      bit InitLCD(unsigned char no_port);
      void AfficherCaractere (char caractere);
      void SelectPosCaractLiCo(unsigned char ligne, unsigned char colonne);
      void AfficherChaineAZT(char str[]);
      void EffacerEcran ();
   
   Les fonctions d'abstraction utilisées pour communiquer sur le bus I2C sont:
      unsigned char I2CWrite   (unsigned char bus, unsigned char addr, unsigned char *buffer, unsigned char buffersize);
      unsigned char I2CRegWrite(unsigned char bus, unsigned char addr, unsigned char reg    , unsigned char dataVal);
      unsigned char I2CRead    (unsigned char bus, unsigned char addr, unsigned char *buffer, unsigned char buffersize);
      unsigned char I2CRegRead (unsigned char bus, unsigned char addr, unsigned char reg    , char *error); 

=*===========================================================================*/
#include "SMBUS.h"
#include "Oled_128x64.h"
#include <stdio.h>


code unsigned char Oled_BasicFont[96][8] = {
  {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
  {0x00,0x00,0x5F,0x00,0x00,0x00,0x00,0x00},
  {0x00,0x00,0x07,0x00,0x07,0x00,0x00,0x00},
  {0x00,0x14,0x7F,0x14,0x7F,0x14,0x00,0x00},
  {0x00,0x24,0x2A,0x7F,0x2A,0x12,0x00,0x00},
  {0x00,0x23,0x13,0x08,0x64,0x62,0x00,0x00},
  {0x00,0x36,0x49,0x55,0x22,0x50,0x00,0x00},
  {0x00,0x00,0x05,0x03,0x00,0x00,0x00,0x00},
  {0x00,0x1C,0x22,0x41,0x00,0x00,0x00,0x00},
  {0x00,0x41,0x22,0x1C,0x00,0x00,0x00,0x00},
  {0x00,0x08,0x2A,0x1C,0x2A,0x08,0x00,0x00},
  {0x00,0x08,0x08,0x3E,0x08,0x08,0x00,0x00},
  {0x00,0xA0,0x60,0x00,0x00,0x00,0x00,0x00},
  {0x00,0x08,0x08,0x08,0x08,0x08,0x00,0x00},
  {0x00,0x60,0x60,0x00,0x00,0x00,0x00,0x00},
  {0x00,0x20,0x10,0x08,0x04,0x02,0x00,0x00},
  {0x00,0x3E,0x51,0x49,0x45,0x3E,0x00,0x00},
  {0x00,0x00,0x42,0x7F,0x40,0x00,0x00,0x00},
  {0x00,0x62,0x51,0x49,0x49,0x46,0x00,0x00},
  {0x00,0x22,0x41,0x49,0x49,0x36,0x00,0x00},
  {0x00,0x18,0x14,0x12,0x7F,0x10,0x00,0x00},
  {0x00,0x27,0x45,0x45,0x45,0x39,0x00,0x00},
  {0x00,0x3C,0x4A,0x49,0x49,0x30,0x00,0x00},
  {0x00,0x01,0x71,0x09,0x05,0x03,0x00,0x00},
  {0x00,0x36,0x49,0x49,0x49,0x36,0x00,0x00},
  {0x00,0x06,0x49,0x49,0x29,0x1E,0x00,0x00},
  {0x00,0x00,0x36,0x36,0x00,0x00,0x00,0x00},
  {0x00,0x00,0xAC,0x6C,0x00,0x00,0x00,0x00},
  {0x00,0x08,0x14,0x22,0x41,0x00,0x00,0x00},
  {0x00,0x14,0x14,0x14,0x14,0x14,0x00,0x00},
  {0x00,0x41,0x22,0x14,0x08,0x00,0x00,0x00},
  {0x00,0x02,0x01,0x51,0x09,0x06,0x00,0x00},
  {0x00,0x32,0x49,0x79,0x41,0x3E,0x00,0x00},
  {0x00,0x7E,0x09,0x09,0x09,0x7E,0x00,0x00},
  {0x00,0x7F,0x49,0x49,0x49,0x36,0x00,0x00},
  {0x00,0x3E,0x41,0x41,0x41,0x22,0x00,0x00},
  {0x00,0x7F,0x41,0x41,0x22,0x1C,0x00,0x00},
  {0x00,0x7F,0x49,0x49,0x49,0x41,0x00,0x00},
  {0x00,0x7F,0x09,0x09,0x09,0x01,0x00,0x00},
  {0x00,0x3E,0x41,0x41,0x51,0x72,0x00,0x00},
  {0x00,0x7F,0x08,0x08,0x08,0x7F,0x00,0x00},
  {0x00,0x41,0x7F,0x41,0x00,0x00,0x00,0x00},
  {0x00,0x20,0x40,0x41,0x3F,0x01,0x00,0x00},
  {0x00,0x7F,0x08,0x14,0x22,0x41,0x00,0x00},
  {0x00,0x7F,0x40,0x40,0x40,0x40,0x00,0x00},
  {0x00,0x7F,0x02,0x0C,0x02,0x7F,0x00,0x00},
  {0x00,0x7F,0x04,0x08,0x10,0x7F,0x00,0x00},
  {0x00,0x3E,0x41,0x41,0x41,0x3E,0x00,0x00},
  {0x00,0x7F,0x09,0x09,0x09,0x06,0x00,0x00},
  {0x00,0x3E,0x41,0x51,0x21,0x5E,0x00,0x00},
  {0x00,0x7F,0x09,0x19,0x29,0x46,0x00,0x00},
  {0x00,0x26,0x49,0x49,0x49,0x32,0x00,0x00},
  {0x00,0x01,0x01,0x7F,0x01,0x01,0x00,0x00},
  {0x00,0x3F,0x40,0x40,0x40,0x3F,0x00,0x00},
  {0x00,0x1F,0x20,0x40,0x20,0x1F,0x00,0x00},
  {0x00,0x3F,0x40,0x38,0x40,0x3F,0x00,0x00},
  {0x00,0x63,0x14,0x08,0x14,0x63,0x00,0x00},
  {0x00,0x03,0x04,0x78,0x04,0x03,0x00,0x00},
  {0x00,0x61,0x51,0x49,0x45,0x43,0x00,0x00},
  {0x00,0x7F,0x41,0x41,0x00,0x00,0x00,0x00},
  {0x00,0x02,0x04,0x08,0x10,0x20,0x00,0x00},
  {0x00,0x41,0x41,0x7F,0x00,0x00,0x00,0x00},
  {0x00,0x04,0x02,0x01,0x02,0x04,0x00,0x00},
  {0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00},
  {0x00,0x01,0x02,0x04,0x00,0x00,0x00,0x00},
  {0x00,0x20,0x54,0x54,0x54,0x78,0x00,0x00},
  {0x00,0x7F,0x48,0x44,0x44,0x38,0x00,0x00},
  {0x00,0x38,0x44,0x44,0x28,0x00,0x00,0x00},
  {0x00,0x38,0x44,0x44,0x48,0x7F,0x00,0x00},
  {0x00,0x38,0x54,0x54,0x54,0x18,0x00,0x00},
  {0x00,0x08,0x7E,0x09,0x02,0x00,0x00,0x00},
  {0x00,0x18,0xA4,0xA4,0xA4,0x7C,0x00,0x00},
  {0x00,0x7F,0x08,0x04,0x04,0x78,0x00,0x00},
  {0x00,0x00,0x7D,0x00,0x00,0x00,0x00,0x00},
  {0x00,0x80,0x84,0x7D,0x00,0x00,0x00,0x00},
  {0x00,0x7F,0x10,0x28,0x44,0x00,0x00,0x00},
  {0x00,0x41,0x7F,0x40,0x00,0x00,0x00,0x00},
  {0x00,0x7C,0x04,0x18,0x04,0x78,0x00,0x00},
  {0x00,0x7C,0x08,0x04,0x7C,0x00,0x00,0x00},
  {0x00,0x38,0x44,0x44,0x38,0x00,0x00,0x00},
  {0x00,0xFC,0x24,0x24,0x18,0x00,0x00,0x00},
  {0x00,0x18,0x24,0x24,0xFC,0x00,0x00,0x00},
  {0x00,0x00,0x7C,0x08,0x04,0x00,0x00,0x00},
  {0x00,0x48,0x54,0x54,0x24,0x00,0x00,0x00},
  {0x00,0x04,0x7F,0x44,0x00,0x00,0x00,0x00},
  {0x00,0x3C,0x40,0x40,0x7C,0x00,0x00,0x00},
  {0x00,0x1C,0x20,0x40,0x20,0x1C,0x00,0x00},
  {0x00,0x3C,0x40,0x30,0x40,0x3C,0x00,0x00},
  {0x00,0x44,0x28,0x10,0x28,0x44,0x00,0x00},
  {0x00,0x1C,0xA0,0xA0,0x7C,0x00,0x00,0x00},
  {0x00,0x44,0x64,0x54,0x4C,0x44,0x00,0x00},
  {0x00,0x08,0x36,0x41,0x00,0x00,0x00,0x00},
  {0x00,0x00,0x7F,0x00,0x00,0x00,0x00,0x00},
  {0x00,0x41,0x36,0x08,0x00,0x00,0x00,0x00},
  {0x00,0x02,0x01,0x01,0x02,0x01,0x00,0x00},
  {0x00,0x02,0x05,0x05,0x02,0x00,0x00,0x00}
};


code unsigned char Oled_BasicFont1[256][6]={  
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},        // caractère 0 (0x00)    
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},      
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},       // caractère 31
{0xFF,0xFF,0xFF,0xFF,0xFF,0xFF},       // caractère 32  ' '
{0xFF,0xFF,0x41,0xFF,0xFF,0xFF},       // caractère 33  '!'
{0xFF,0xF9,0xFF,0xF9,0xFF,0xFF},       // caractère 34  '"'
{0xD7,0x01,0xD7,0x01,0xD7,0xFF},       // caractère 35  '$'
{0xF7,0xAB,0x29,0xAB,0xDF,0xFF},       // caractère 36  '#'
{0xDB,0xD5,0xAB,0x57,0xB7,0xFF},       // caractère 37  '%'
{0x93,0x6D,0x4D,0xB3,0x5F,0xFF},       // caractère 38  '&'
{0xFF,0xFF,0xF9,0xFF,0xFF,0xFF},       // caractère 39  '''
{0xFF,0xFF,0x83,0x7D,0xFF,0xFF},       // caractère 40  '('
{0xFF,0x7D,0x83,0xFF,0xFF,0xFF},       // caractère 41  ')'
{0xB7,0xD7,0xE1,0xD7,0xB7,0xFF},       // caractère 42  '*'
{0xEF,0xEF,0x83,0xEF,0xEF,0xFF},       // caractère 43  '+'
{0xFF,0xFB,0xFD,0xFF,0xFF,0xFF},       // caractère 44  '´'
{0xEF,0xEF,0xEF,0xEF,0xEF,0xFF},       // caractère 45  '-'
{0xFF,0x7F,0xFF,0xFF,0xFF,0xFF},       // caractère 46  '.'
{0x7F,0x9F,0xEF,0xF3,0xFD,0xFF},       // caractère 47  '/'
{0x83,0x7D,0x7D,0x7D,0x83,0xFF},       // caractère 48  '0'
{0x77,0x7B,0x01,0x7F,0x7F,0xFF},       // caractère 49  '1'
{0x7B,0x3D,0x5D,0x6D,0x73,0xFF},       //    etc ...
{0x7D,0x6D,0x6D,0x6D,0x93,0xFF},
{0xCF,0xD7,0xDB,0x01,0xDF,0xFF},
{0xB1,0x75,0x75,0x75,0x8D,0xFF},
{0x83,0x6D,0x6D,0x6D,0x9B,0xFF},
{0xFD,0x7D,0x9D,0xE5,0xF9,0xFF},
{0x93,0x6D,0x6D,0x6D,0x93,0xFF},     
{0xB3,0x6D,0x6D,0x6D,0x83,0xFF},       // caractère 57  '9'
{0xFF,0xFF,0xBB,0xFF,0xFF,0xFF},       // caractère 58  ':'
{0xFF,0x7F,0xBB,0xFF,0xFF,0xFF},       // caractère 59  ';'
{0xEF,0xD7,0xD7,0xBB,0x7D,0xFF},       // caractère 60  '<'
{0xBB,0xBB,0xBB,0xBB,0xBB,0xFF},       // caractère 61  '='
{0x7D,0xBB,0xD7,0xD7,0xEF,0xFF},       // caractère 62  '>'
{0xF3,0xFD,0x5D,0xED,0xF3,0xFF},       // caractère 63  '?'
{0x83,0x6D,0x55,0x55,0x63,0xFF},       // caractère 64  '@'
{0x07,0xDB,0xDD,0xDB,0x07,0xFF},       // caractère 65  'A'
{0x01,0x6D,0x6D,0x6D,0x93,0xFF},       // caractère 66  'B'
{0x83,0x7D,0x7D,0x7D,0xBB,0xFF},       //    etc ...
{0x01,0x7D,0x7D,0x7D,0x83,0xFF},
{0x01,0x6D,0x6D,0x6D,0x7D,0xFF},
{0x01,0xED,0xED,0xED,0xFD,0xFF},
{0x83,0x7D,0x7D,0x5D,0x9B,0xFF},
{0x01,0xEF,0xEF,0xEF,0x01,0xFF},
{0xFF,0x7D,0x01,0x7D,0xFF,0xFF},
{0xBF,0x7F,0x7D,0x81,0xFD,0xFF},
{0x01,0xEF,0xD7,0xBB,0x7D,0xFF},
{0x01,0x7F,0x7F,0x7F,0x7F,0xFF},
{0x01,0xF3,0xCF,0xF3,0x01,0xFF},
{0x01,0xF7,0xEF,0xDF,0x01,0xFF},
{0x83,0x7D,0x7D,0x7D,0x83,0xFF},
{0x01,0xED,0xED,0xED,0xF3,0xFF},
{0x83,0x7D,0x5D,0xBD,0x43,0xFF},
{0x01,0xED,0xCD,0xAD,0x73,0xFF},
{0xB3,0x6D,0x6D,0x6D,0x9B,0xFF},
{0xFD,0xFD,0x01,0xFD,0xFD,0xFF},
{0x81,0x7F,0x7F,0x7F,0x81,0xFF},
{0xF1,0xCF,0x3F,0xCF,0xF1,0xFF},
{0x81,0x7F,0x81,0x7F,0x81,0xFF},
{0x39,0xD7,0xEF,0xD7,0x39,0xFF},
{0xF9,0xF7,0x0F,0xF7,0xF9,0xFF},
{0x3D,0x5D,0x6D,0x75,0x79,0xFF},       // caractère 90  'Z'
{0xFF,0xFF,0x01,0x7D,0xFF,0xFF},       // caractère 91  '['
{0xFD,0xF3,0xEF,0x9F,0x7F,0xFF},       // caractère 92  '\'
{0xFF,0x7D,0x01,0xFF,0xFF,0xFF},       // caractère 93  ']'
{0xF7,0xFB,0xFD,0xFB,0xF7,0xFF},       // caractère 94  '^'
{0x7F,0x7F,0x7F,0x7F,0x7F,0xFF},       // caractère 95  '_'
{0xFF,0xFD,0xFB,0xFF,0xFF,0xFF},       // caractère 96  '`'
{0xBF,0x57,0x57,0x57,0x0F,0xFF},       // caractère 97  'a'
{0x01,0xAF,0x77,0x77,0x8F,0xFF},       // caractère 98  'b'
{0x8F,0x77,0x77,0x77,0xAF,0xFF},       //    etc ...
{0x8F,0x77,0x77,0xAF,0x01,0xFF},
{0x8F,0x57,0x57,0x57,0xCF,0xFF},
{0xEF,0x03,0xED,0xED,0xFB,0xFF},
{0xEF,0x57,0x57,0x57,0x87,0xFF},       // caractère 103 'g'  ancien : 0xE7,0x5B,0x5B,0x5B,0x83,0xFF
{0x01,0xEF,0xF7,0xF7,0x0F,0xFF},
{0xFF,0xFF,0x05,0xFF,0xFF,0xFF},
{0xFF,0xBF,0x7F,0x85,0xFF,0xFF},
{0x01,0xDF,0xDF,0xAF,0x77,0xFF},
{0xFF,0x7D,0x01,0x7F,0xFF,0xFF},
{0x07,0xF7,0x8F,0xF7,0x0F,0xFF},
{0x07,0xEF,0xF7,0xF7,0x0F,0xFF},
{0x8F,0x77,0x77,0x77,0x8F,0xFF},
{0x07,0xD7,0xD7,0xD7,0xEF,0xFF},       // caractère 112 'p'  ancien : 0x01,0xEB,0xDD,0xDD,0xE3,0xFF
{0xEF,0xD7,0xD7,0xCF,0x07,0xFF},       // caractère 113 'q'  ancien : 0xE3,0xDD,0xDD,0xEB,0x01,0xFF
{0x07,0xEF,0xF7,0xF7,0xEF,0xFF},
{0x6F,0x57,0x57,0x57,0xBF,0xFF},
{0xF7,0x81,0x77,0x77,0xBF,0xFF},
{0x87,0x7F,0x7F,0xBF,0x07,0xFF},
{0xE7,0x9F,0x7F,0x9F,0xE7,0xFF},
{0x87,0x7F,0x9F,0x7F,0x87,0xFF},
{0x77,0xAF,0xDF,0xAF,0x77,0xFF},
{0xE7,0x5F,0x5F,0x5F,0xA7,0xFF},       // caractère 121 'y'  ancien : 0xB1,0x6F,0x6F,0x77,0x81,0xFF
{0x77,0x37,0x57,0x67,0x77,0xFF},       // caractère 122 'z'
{0xFF,0xEF,0x93,0x7D,0xFF,0xFF},       // caractère 123 {   
{0xFF,0xFF,0x01,0xFF,0xFF,0xFF},       // caractère 124 |
{0xFF,0x7D,0x93,0xEF,0xFF,0xFF},       // caractère 125  }
{0xEF,0xF7,0xEF,0xDF,0xEF,0xFF},       // caractère 126  ~
{0xEF,0xEF,0xAB,0xC7,0xEF,0xFF},       // caractère 127
{0xEF,0xEF,0xAB,0xC7,0xEF,0xFF},       // caractère 128
{0xFF,0x01,0xFF,0x01,0xFF,0xFF},       // caractère 129  
{0x8F,0x53,0x55,0x57,0xCF,0xFF},       // caractère 130  
{0xBB,0x55,0x55,0x55,0x0B,0xFF},       // caractère 131  
{0xBF,0x55,0x57,0x55,0x0F,0xFF},       // caractère 132  
{0xBF,0x57,0x55,0x53,0x0F,0xFF},       // caractère 133  
{0x6D,0xDB,0xB7,0x6D,0xDB,0xFF},       // caractère 134  
{0xE3,0xDD,0x5D,0x1D,0xEB,0xFF},       // caractère 135  
{0x8B,0x55,0x55,0x55,0x4B,0xFF},       // caractère 136  
{0x8F,0x55,0x57,0x55,0x4F,0xFF},       // caractère 137  
{0x8F,0x57,0x55,0x53,0xCF,0xFF},       // caractère 138  
{0xFF,0xFD,0x07,0xFD,0xFF,0xFF},       // caractère 139  
{0xFF,0xFB,0x0D,0xFB,0xFF,0xFF},       // caractère 140  
{0xFF,0xFF,0x0D,0xFB,0xFF,0xFF},       // caractère 141  
{0xF3,0xCD,0x3B,0xCD,0xF3,0xFF},       // caractère 142  
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},       // caractère 143  :-)
{0x55,0xAB,0x55,0xAB,0x55,0xFF},       // caractère 144  
{0x01,0x01,0x01,0x01,0x01,0xFF},       // caractère 145  
{0xEF,0xD7,0xEF,0xD7,0xEF,0xFF},       // caractère 146  
{0x8B,0x75,0x75,0x75,0x8B,0xFF},       // caractère 147  
{0x8F,0x75,0x77,0x75,0x8F,0xFF},       // caractère 148  
{0x8F,0x77,0x75,0x73,0x8F,0xFF},       // caractère 149  
{0x8B,0x7D,0x7D,0x7D,0x8B,0xFF},       // caractère 150  
{0x8F,0x7F,0x7D,0x7B,0x8F,0xFF},       // caractère 151  
{0xBF,0x55,0x57,0x55,0x0F,0xFF},       // caractère 152  
{0xBF,0x57,0x55,0x53,0x0F,0xFF},       // caractère 153  
{0x6D,0xDB,0xB7,0x6D,0xDB,0xFF},       // caractère 154  
{0xE3,0xDD,0x5D,0x1D,0xEB,0xFF},       // caractère 155  
{0x8B,0x55,0x55,0x55,0x4B,0xFF},       // caractère 156  
{0x8F,0x55,0x57,0x55,0x4F,0xFF},       // caractère 157  
{0x8F,0x57,0x55,0x53,0xCF,0xFF},       // caractère 158  
{0xFF,0xFD,0x07,0xFD,0xFF,0xFF},       // caractère 159  
{0xFF,0xFB,0x0D,0xFB,0xFF,0xFF},       // caractère 160  
{0xFF,0xFF,0x0D,0xFB,0xFF,0xFF},       // caractère 161  
{0xF3,0xCD,0x3B,0xCD,0xF3,0xFF},       // caractère 162  
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},       // caractère 163  
{0x55,0xAB,0x55,0xAB,0x55,0xFF},       // caractère 164  
{0x01,0x01,0x01,0x01,0x01,0xFF},       // caractère 165  
{0xEF,0xD7,0xEF,0xD7,0xEF,0xFF},       // caractère 166  
{0x8B,0x75,0x75,0x75,0x8B,0xFF},       // caractère 167  
{0x8F,0x75,0x77,0x75,0x8F,0xFF},       // caractère 168  
{0x8F,0x77,0x75,0x73,0x8F,0xFF},       // caractère 169   
{0xFF,0xFB,0x0D,0xFB,0xFF,0xFF},       // caractère 170  
{0xFF,0xFF,0x0D,0xFB,0xFF,0xFF},       // caractère 171  
{0xF3,0xCD,0x3B,0xCD,0xF3,0xFF},       // caractère 172  
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},       // caractère 173  
{0x55,0xAB,0x55,0xAB,0x55,0xFF},       // caractère 174  
{0x01,0x83,0xC7,0xEF,0xFF,0xFF},       // caractère 175  flèche pour menu       {0x01,0x01,0x01,0x01,0x01,0xFF}, 
{0xF1,0xF5,0xF1,0xFF,0xFF,0xFF},       // caractère 176  '°'
{0x8B,0x75,0x75,0x75,0x8B,0xFF},       // caractère 177  
{0x8F,0x75,0x77,0x75,0x8F,0xFF},       // caractère 178  
{0x8F,0x77,0x75,0x73,0x8F,0xFF},       // caractère 179  
{0x8B,0x7D,0x7D,0x7D,0x8B,0xFF},       // caractère 180  
{0x8F,0x7F,0x7D,0x7B,0x8F,0xFF},       // caractère 181  
{0xBF,0x55,0x57,0x55,0x0F,0xFF},       // caractère 182  
{0xBF,0x57,0x55,0x53,0x0F,0xFF},       // caractère 183  
{0x6D,0xDB,0xB7,0x6D,0xDB,0xFF},       // caractère 184  
{0xE3,0xDD,0x5D,0x1D,0xEB,0xFF},       // caractère 185  
{0x8B,0x55,0x55,0x55,0x4B,0xFF},       // caractère 186  
{0x8F,0x55,0x57,0x55,0x4F,0xFF},       // caractère 187  
{0x8F,0x57,0x55,0x53,0xCF,0xFF},       // caractère 188  
{0xFF,0xFD,0x07,0xFD,0xFF,0xFF},       // caractère 189  
{0xFF,0xFB,0x0D,0xFB,0xFF,0xFF},       // caractère 190  
{0xFF,0xFF,0x0D,0xFB,0xFF,0xFF},       // caractère 191  
{0xF3,0xCD,0x3B,0xCD,0xF3,0xFF},       // caractère 192  
{0xBB,0x7F,0x6F,0x7F,0xBB,0xFF},       // caractère 193  
{0x55,0xAB,0x55,0xAB,0x55,0xFF},       // caractère 194  
{0x01,0x01,0x01,0x01,0x01,0xFF},       // caractère 195  
{0xEF,0xD7,0xEF,0xD7,0xEF,0xFF},       // caractère 196  
{0x8B,0x75,0x75,0x75,0x8B,0xFF},       // caractère 197  
{0x8F,0x75,0x77,0x75,0x8F,0xFF},       // caractère 198  
{0x8F,0x77,0x75,0x73,0x8F,0xFF},       // caractère 199  
{0x8B,0x7D,0x7D,0x7D,0x8B,0xFF},       // caractère 200  
{0x8F,0x7F,0x7D,0x7B,0x8F,0xFF},       // caractère 201  
{0x8B,0x7D,0x7D,0x7D,0x8B,0xFF},       // caractère 202  
{0x8F,0x7F,0x7D,0x7B,0x8F,0xFF},       // caractère 203  
{0x8B,0x7D,0x7D,0x7D,0x8B,0xFF},       // caractère 204  
{0x8F,0x7F,0x7D,0x7B,0x8F,0xFF},       // caractère 205  
{0x8B,0x7D,0x7D,0x7D,0x8B,0xFF},       // caractère 206  
{0x8F,0x7F,0x7D,0x7B,0x8F,0xFF},       // caractère 207  
{0x8B,0x7D,0x7D,0x7D,0x8B,0xFF},       // caractère 208  
{0x8F,0x7F,0x7D,0x7B,0x8F,0xFF},       // caractère 209  
{0x8B,0x7D,0x7D,0x7D,0x8B,0xFF},       // caractère 210  
{0x8F,0x7F,0x7D,0x7B,0x8F,0xFF},       // caractère 211  
{0x8B,0x7D,0x7D,0x7D,0x8B,0xFF},       // caractère 212  
{0x8F,0x7F,0x7D,0x7B,0x8F,0xFF},       // caractère 213  
{0x8B,0x7D,0x7D,0x7D,0x8B,0xFF},       // caractère 214  
{0x8F,0x7F,0x7D,0x7B,0x8F,0xFF},       // caractère 215  
{0x8B,0x7D,0x7D,0x7D,0x8B,0xFF},       // caractère 216  
{0x8F,0x7F,0x7D,0x7B,0x8F,0xFF},       // caractère 217  
{0x8B,0x7D,0x7D,0x7D,0x8B,0xFF},       // caractère 218  
{0x8F,0x7F,0x7D,0x7B,0x8F,0xFF},       // caractère 219  
{0x8B,0x7D,0x7D,0x7D,0x8B,0xFF},       // caractère 220  
{0x8F,0x7F,0x7D,0x7B,0x8F,0xFF},       // caractère 221  
{0x8B,0x7D,0x7D,0x7D,0x8B,0xFF},       // caractère 222  
{0x8F,0x7F,0x7D,0x7B,0x8F,0xFF},       // caractère 223  
{0xBF,0x57,0x55,0x53,0x0F,0xFF},       // caractère 224  à  
{0xFF,0xFF,0xFF,0xFF,0xFF,0xFF},       // caractère 225  
{0xBB,0x55,0x55,0x55,0x0B,0xFF},       // caractère 226  â  
{0xFF,0xFF,0xFF,0xFF,0xFF,0xFF},       // caractère 227  
{0xBF,0x55,0x57,0x55,0x0F,0xFF},       // caractère 228  ä 
{0xFF,0xFF,0xFF,0xFF,0xFF,0xFF},       // caractère 229  
{0xFF,0xFF,0xFF,0xFF,0xFF,0xFF},       // caractère 230  
{0xE3,0xDD,0x5D,0x1D,0xEB,0xFF},       // caractère 231  ç 
{0x8F,0x57,0x55,0x53,0xCF,0xFF},       // caractère 232  è  
{0x8F,0x53,0x55,0x57,0xCF,0xFF},       // caractère 233  é  
{0x8B,0x55,0x55,0x55,0x4B,0xFF},       // caractère 234  ê  
{0x8F,0x55,0x57,0x55,0x4F,0xFF},       // caractère 235  ë  
{0xFF,0xFF,0x0D,0xFB,0xFF,0xFF},       // caractère 246  ì   
{0xFF,0xFF,0xFF,0xFF,0xFF,0xFF},       // caractère 237  
{0xFF,0xFB,0x0D,0xFB,0xFF,0xFF},       // caractère 238  î 
{0xFF,0xFD,0x07,0xFD,0xFF,0xFF},       // caractère 239  ï  
{0xFF,0xFF,0xFF,0xFF,0xFF,0xFF},       // caractère 240  
{0xFF,0xFF,0xFF,0xFF,0xFF,0xFF},       // caractère 241  
{0x8F,0x77,0x75,0x73,0x8F,0xFF},       // caractère 242  ò  
{0xFF,0xFF,0xFF,0xFF,0xFF,0xFF},       // caractère 243    
{0x8B,0x75,0x75,0x75,0x8B,0xFF},       // caractère 244  ô  
{0xFF,0xFF,0xFF,0xFF,0xFF,0xFF},       // caractère 245  
{0x8F,0x75,0x77,0x75,0x8F,0xFF},       // caractère 246  ö   
{0xFF,0xFF,0xFF,0xFF,0xFF,0xFF},       // caractère 247  
{0xFF,0xFF,0xFF,0xFF,0xFF,0xFF},       // caractère 248   
{0x8F,0x7F,0x7D,0x7B,0x8F,0xFF},       // caractère 249  ù   
{0xFF,0xFF,0xFF,0xFF,0xFF,0xFF},       // caractère 250  
{0x8B,0x7D,0x7D,0x7D,0x8B,0xFF},       // caractère 251  û  
{0x87,0x7D,0x7F,0xBD,0x07,0xFF},       // caractère 252  ü  
{0xFF,0xFF,0xFF,0xFF,0xFF,0xFF},       // caractère 253  
{0xFF,0xFF,0xFF,0xFF,0xFF,0xFF},       // caractère 254  
{0xFF,0xFF,0xFF,0xFF,0xFF,0xFF}};      // caractère 255  



/*---------------------------------------------------------------------------*-
   OLEDSendMessageINT ()
  -----------------------------------------------------------------------------
   Descriptif: Affiche sur l'écran OLED 
   Entrée    : --
   Sortie    : --
-*---------------------------------------------------------------------------*/
void OLEDSendMessageINT(char jsonName[], int dataToSend, unsigned char lin, unsigned char col){
   xdata unsigned char stringTmp[20];
   sprintf(stringTmp,"%s : %6d",jsonName,dataToSend);
   SelectPosCaractLiCo(lin,col);
   AfficherChaineAZT(stringTmp);
}

/*---------------------------------------------------------------------------*-
   OLEDSendMessage ()
  -----------------------------------------------------------------------------
   Descriptif: Affiche sur l'écran OLED 
   Entrée    : --
   Sortie    : --
-*---------------------------------------------------------------------------*/
void OLEDSendMessage(char strToSend[], unsigned char lin, unsigned char col){
   SelectPosCaractLiCo(lin,col);
   AfficherChaineAZT(strToSend);
}




/*---------------------------------------------------------------------------*-
   InitLCD
  -----------------------------------------------------------------------------
   Descriptif: Initialise le Display LCD 4 bits et le port de connexion.
               Caractéristique par défaut: 2 lignes carct. 5x7 dots
   Entrée    : no_port, Numéro du port utilisé par le LCD 4 bits (0, 1 ou 2)
   Sortie    : Error, 0 0k, 1 error
-*---------------------------------------------------------------------------*/
bit InitLCD(unsigned char no_port){
   idata unsigned char buf[2];
   idata unsigned char bus=no_port;
   no_port = no_port; // Evite Warning
   buf[0] = 0x00;
   buf[1] = OLED128X64_DISPLAY_ON_CMD;
   if (I2CWrite(bus,OLED128X64_ADDRESS, buf, 2) == -1)
      return -1;
   #if 0
      buf[0] = 0x00;
      buf[1] = OLED128X64_DISPLAY_ALL_ON_CMD;
      if (I2CWrite(bus,OLED128X64_ADDRESS, buf, 2) == -1)
         return -1;
   #endif
   
   return 1;
}

//
///*---------------------------------------------------------------------------*-
//   AfficherCaract ()
//  -----------------------------------------------------------------------------
//   Descriptif: Affiche un caractère à la position courante du curseur
//   Entrée    : Code Ascii du caractère à afficher
//   Sortie    : --
//-*---------------------------------------------------------------------------*/
void AfficherCaractere (char caractere){
   idata unsigned char buf[2];
   idata unsigned char bus=0;
   idata unsigned char i =0;
   
   #if(0)
      if((caractere < 32) ||(caractere >127)){
         caractere = '?'+32;
      }
      for(i=0;i<8;i++){
         buf[0] = OLED128X64_DATA_MODE;
         buf[1] = Oled_BasicFont[caractere-32][i];
         if (I2CWrite(bus,OLED128X64_ADDRESS, buf, 2) == -1)
            i=8; // il faudrait traiter le cas ou il y a un probleme
      }
   
   #else
      for(i=0;i<6;i++){
         buf[0] = OLED128X64_DATA_MODE;
         buf[1] = ~Oled_BasicFont1[caractere][i];
         if (I2CWrite(bus,OLED128X64_ADDRESS, buf, 2) == -1)
            i=8; // il faudrait traiter le cas ou il y a un probleme
      }
      
   #endif  
}









///*---------------------------------------------------------------------------*-
//   SelectPosCaractLiCo ()
//  -----------------------------------------------------------------------------
//   Descriptif: Sélectionne la position du caractère passé en argument
//   Entrée    : ligne, numéro de la ligne d'affichage 0 ou 1
//               colonne, numéro de la colonne d'affichage 0 à 15
//   Sortie    : --
//-*---------------------------------------------------------------------------*/
void SelectPosCaractLiCo(unsigned char ligne, unsigned char colonne){
   idata unsigned char buf[2];
   idata unsigned char bus=0;
   idata unsigned char charWidth = 6; //8
   //command,  set page address, set column lower address, set column higher address
   
   buf[0] = 0x00;
   buf[1] = 0xB0 + ligne;
   if (I2CWrite(bus,OLED128X64_ADDRESS, buf, 2) == -1)
      bus=0; // Cette fonction retourne -1 en cas d'erreur, mais la fonction EffacerEcran ne gere pas encore cela

   buf[0] = 0x00;
   buf[1] = 0x00 + ((charWidth*colonne+2) & 0x0F);
   if (I2CWrite(bus,OLED128X64_ADDRESS, buf, 2) == -1)
      bus=0; // Cette fonction retourne -1 en cas d'erreur, mais la fonction EffacerEcran ne gere pas encore cela

   buf[0] = 0x00;
   buf[1] = 0x10 + (((charWidth*colonne+2)>>4) & 0x0F);
   if (I2CWrite(bus,OLED128X64_ADDRESS, buf, 2) == -1)
      bus=0; // Cette fonction retourne -1 en cas d'erreur, mais la fonction EffacerEcran ne gere pas encore cela
}

///*---------------------------------------------------------------------------*-
//   AfficherChaineAZT ()
//  -----------------------------------------------------------------------------
//   Descriptif: Affiche une chaîne de caractère AZT à la position courante du 
//               curseur
//   Entrée    : str, de caractères AZT
//   Sortie    : --
//-*---------------------------------------------------------------------------*/
void AfficherChaineAZT(char str[]){
   idata unsigned char i=0;
   while(str[i] != 0){
      AfficherCaractere(str[i]);
      i++;
   }


}
   
//
///*---------------------------------------------------------------------------*-
//   AfficherChaineAZTCentreLi ()
//  -----------------------------------------------------------------------------
//   Descriptif: Affiche une chaîne de caractère AZT Centrer sur la ligne
//   Entrée    : str, chaine de caractères AZT
//               ligne, numéro de la ligne 0 ou 1
//   Sortie    : --
//-*---------------------------------------------------------------------------*/
//extern void AfficherChaineAZTCentreLi(char str[], unsigned char ligne);
//



///*---------------------------------------------------------------------------*-
//   EffacerEcran ()
//  -----------------------------------------------------------------------------
//   Descriptif: Efface l'écran LCD
//   Entrée    : --
//   Sortie    : --
//-*---------------------------------------------------------------------------*/
void EffacerEcran (){
   idata unsigned char buf[2];
   idata unsigned char bus=0;
   idata x,y;
   
   buf[0] = 0x00;
   buf[1] = OLED128X64_DISPLAY_OFF_CMD;
   if (I2CWrite(bus,OLED128X64_ADDRESS, buf, 2) == -1)
      bus=0; // Cette fonction retourne -1 en cas d'erreur, mais la fonction EffacerEcran ne gere pas encore cela

   for(y=0;y<8;y++){
      SelectPosCaractLiCo(y,0);
      //for(x=0;x<16;x++){
      for(x=0;x<22;x++){
         AfficherCaractere(' ');
      }
   }
   buf[0] = 0x00;
   buf[1] = OLED128X64_DISPLAY_ON_CMD;
   if (I2CWrite(bus,OLED128X64_ADDRESS, buf, 2) == -1)
      bus=0; // Cette fonction retourne -1 en cas d'erreur, mais la fonction EffacerEcran ne gere pas encore cela

}
